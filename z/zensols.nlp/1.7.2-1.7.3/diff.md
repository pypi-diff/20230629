# Comparing `tmp/zensols.nlp-1.7.2-py3-none-any.whl.zip` & `tmp/zensols.nlp-1.7.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 54643 bytes, number of entries: 25
--rw-rw-r--  2.0 unx      154 b- defN 23-Jun-28 00:54 zensols/nlp/__init__.py
--rw-rw-r--  2.0 unx     9681 b- defN 23-Jun-28 00:54 zensols/nlp/combine.py
--rw-rw-r--  2.0 unx     6724 b- defN 23-Jun-28 00:54 zensols/nlp/component.py
--rw-rw-r--  2.0 unx    43376 b- defN 23-Jun-28 00:54 zensols/nlp/container.py
--rw-rw-r--  2.0 unx     1395 b- defN 23-Jun-28 00:54 zensols/nlp/dataframe.py
--rw-rw-r--  2.0 unx     4226 b- defN 23-Jun-28 00:54 zensols/nlp/decorate.py
--rw-rw-r--  2.0 unx     8363 b- defN 23-Jun-28 00:54 zensols/nlp/domain.py
--rw-rw-r--  2.0 unx     6579 b- defN 23-Jun-28 00:54 zensols/nlp/nerscore.py
--rw-rw-r--  2.0 unx    17214 b- defN 23-Jun-28 00:54 zensols/nlp/norm.py
--rw-rw-r--  2.0 unx     9198 b- defN 23-Jun-28 00:54 zensols/nlp/parser.py
--rw-rw-r--  2.0 unx    21289 b- defN 23-Jun-28 00:54 zensols/nlp/score.py
--rw-rw-r--  2.0 unx     5856 b- defN 23-Jun-28 00:54 zensols/nlp/serial.py
--rw-rw-r--  2.0 unx    19633 b- defN 23-Jun-28 00:54 zensols/nlp/sparser.py
--rw-rw-r--  2.0 unx      581 b- defN 23-Jun-28 00:54 zensols/nlp/stemmer.py
--rw-rw-r--  2.0 unx    18311 b- defN 23-Jun-28 00:54 zensols/nlp/tok.py
--rw-r--r--  2.0 unx      398 b- defN 23-Jun-28 00:54 zensols/nlp/resources/component.conf
--rw-r--r--  2.0 unx      897 b- defN 23-Jun-28 00:54 zensols/nlp/resources/decorator.conf
--rw-r--r--  2.0 unx      823 b- defN 23-Jun-28 00:54 zensols/nlp/resources/mapper.conf
--rw-rw-r--  2.0 unx     1328 b- defN 23-Jun-28 00:54 zensols/nlp/resources/obj.conf
--rw-r--r--  2.0 unx     1441 b- defN 23-Jun-28 00:54 zensols/nlp/resources/score.yml
--rw-r--r--  2.0 unx      420 b- defN 23-Jun-28 00:54 zensols/nlp/resources/serial.conf
--rw-rw-r--  2.0 unx     6694 b- defN 23-Jun-28 00:54 zensols.nlp-1.7.2.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Jun-28 00:54 zensols.nlp-1.7.2.dist-info/WHEEL
--rw-rw-r--  2.0 unx       12 b- defN 23-Jun-28 00:54 zensols.nlp-1.7.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2036 b- defN 23-Jun-28 00:54 zensols.nlp-1.7.2.dist-info/RECORD
-25 files, 186721 bytes uncompressed, 51381 bytes compressed:  72.5%
+Zip file size: 54820 bytes, number of entries: 25
+-rw-rw-r--  2.0 unx      154 b- defN 23-Jun-29 18:14 zensols/nlp/__init__.py
+-rw-rw-r--  2.0 unx    10450 b- defN 23-Jun-29 18:14 zensols/nlp/combine.py
+-rw-rw-r--  2.0 unx     6724 b- defN 23-Jun-29 18:14 zensols/nlp/component.py
+-rw-rw-r--  2.0 unx    43376 b- defN 23-Jun-29 18:14 zensols/nlp/container.py
+-rw-rw-r--  2.0 unx     1395 b- defN 23-Jun-29 18:14 zensols/nlp/dataframe.py
+-rw-rw-r--  2.0 unx     4226 b- defN 23-Jun-29 18:14 zensols/nlp/decorate.py
+-rw-rw-r--  2.0 unx     8363 b- defN 23-Jun-29 18:14 zensols/nlp/domain.py
+-rw-rw-r--  2.0 unx     6579 b- defN 23-Jun-29 18:14 zensols/nlp/nerscore.py
+-rw-rw-r--  2.0 unx    17214 b- defN 23-Jun-29 18:14 zensols/nlp/norm.py
+-rw-rw-r--  2.0 unx     9198 b- defN 23-Jun-29 18:14 zensols/nlp/parser.py
+-rw-rw-r--  2.0 unx    21289 b- defN 23-Jun-29 18:14 zensols/nlp/score.py
+-rw-rw-r--  2.0 unx     5856 b- defN 23-Jun-29 18:14 zensols/nlp/serial.py
+-rw-rw-r--  2.0 unx    19633 b- defN 23-Jun-29 18:14 zensols/nlp/sparser.py
+-rw-rw-r--  2.0 unx      581 b- defN 23-Jun-29 18:14 zensols/nlp/stemmer.py
+-rw-rw-r--  2.0 unx    18344 b- defN 23-Jun-29 18:14 zensols/nlp/tok.py
+-rw-r--r--  2.0 unx      398 b- defN 23-Jun-29 18:14 zensols/nlp/resources/component.conf
+-rw-r--r--  2.0 unx      897 b- defN 23-Jun-29 18:14 zensols/nlp/resources/decorator.conf
+-rw-r--r--  2.0 unx      823 b- defN 23-Jun-29 18:14 zensols/nlp/resources/mapper.conf
+-rw-rw-r--  2.0 unx     1328 b- defN 23-Jun-29 18:14 zensols/nlp/resources/obj.conf
+-rw-r--r--  2.0 unx     1441 b- defN 23-Jun-29 18:14 zensols/nlp/resources/score.yml
+-rw-r--r--  2.0 unx      420 b- defN 23-Jun-29 18:14 zensols/nlp/resources/serial.conf
+-rw-rw-r--  2.0 unx     6694 b- defN 23-Jun-29 18:14 zensols.nlp-1.7.3.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jun-29 18:14 zensols.nlp-1.7.3.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       12 b- defN 23-Jun-29 18:14 zensols.nlp-1.7.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2037 b- defN 23-Jun-29 18:14 zensols.nlp-1.7.3.dist-info/RECORD
+25 files, 187524 bytes uncompressed, 51558 bytes compressed:  72.5%
```

## zipnote {}

```diff
@@ -57,20 +57,20 @@
 
 Filename: zensols/nlp/resources/score.yml
 Comment: 
 
 Filename: zensols/nlp/resources/serial.conf
 Comment: 
 
-Filename: zensols.nlp-1.7.2.dist-info/METADATA
+Filename: zensols.nlp-1.7.3.dist-info/METADATA
 Comment: 
 
-Filename: zensols.nlp-1.7.2.dist-info/WHEEL
+Filename: zensols.nlp-1.7.3.dist-info/WHEEL
 Comment: 
 
-Filename: zensols.nlp-1.7.2.dist-info/top_level.txt
+Filename: zensols.nlp-1.7.3.dist-info/top_level.txt
 Comment: 
 
-Filename: zensols.nlp-1.7.2.dist-info/RECORD
+Filename: zensols.nlp-1.7.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## zensols/nlp/combine.py

```diff
@@ -47,14 +47,22 @@
     overwrite_features: List[str] = field(default_factory=list)
     """A list of features to be copied/overwritten in order given in the list.
 
     """
     overwrite_nones: bool = field(default=False)
     """Whether to write ``None`` for missing :obj:`overwrite_features`."""
 
+    include_detached_features: bool = field(default=True)
+    """Whether to include copied (yielded or overwritten) features as listed
+    detected features.  This controls what is compared, cloned and for printed
+    in :meth:`~zensols.config.writable.Writable.write`.
+
+    :see: :obj:`.FeatureToken.default_detached_feature_ids`
+
+    """
     def _validate_features(self, target_tok: FeatureToken,
                            source_tok: FeatureToken,
                            context_container: TokenContainer):
         for f in self.validate_features:
             prim = getattr(target_tok, f)
             rep = getattr(source_tok, f)
             if prim != rep:
@@ -63,41 +71,49 @@
                     f'!= {source_tok.text}({f}={rep}) ' +
                     f'in container: {context_container}')
 
     def _merge_tokens(self, target_tok: FeatureToken,
                       source_tok: FeatureToken,
                       context_container: TokenContainer):
         overwrite_nones: bool = self.overwrite_nones
+        include_detached: bool = self.include_detached_features
         if logger.isEnabledFor(logging.DEBUG):
             logger.debug(f'merging tokens: {source_tok} ({type(source_tok)}) '
                          f'-> {target_tok} ({type(target_tok)})')
         self._validate_features(target_tok, source_tok, context_container)
+        f: str
         for f in self.yield_features:
             targ = target_tok.get_value(f)
             if logger.isEnabledFor(logging.DEBUG):
                 logger.debug(f'yield feature: {f}, target={targ}')
             if targ is None:
                 src = source_tok.get_value(f)
                 if logger.isEnabledFor(logging.DEBUG):
                     logger.debug(f'yield feature: {f}, src={src}')
                 if src is not None:
                     if logger.isEnabledFor(logging.DEBUG):
                         logger.debug(f'{src} -> {target_tok.text}.{f}')
                     setattr(target_tok, f, src)
+                    if include_detached and \
+                       target_tok._detatched_feature_ids is not None:
+                        target_tok._detatched_feature_ids.add(f)
         for f in self.overwrite_features:
             if overwrite_nones:
                 src = getattr(source_tok, f)
             else:
                 src = source_tok.get_value(f)
             if logger.isEnabledFor(logging.DEBUG):
                 logger.debug(f'overwrite feature: {f}, src={src}')
             if src is not None:
                 if logger.isEnabledFor(logging.DEBUG):
                     logger.debug(f'{src} -> {target_tok.text}.{f}')
                 setattr(target_tok, f, src)
+                if include_detached and \
+                   target_tok._detatched_feature_ids is not None:
+                    target_tok._detatched_feature_ids.add(f)
 
     def _debug_sentence(self, sent: FeatureSentence, name: str):
         logger.debug(f'{name}:')
         for i, tok in enumerate(sent.tokens):
             logger.debug(f'  {i}: i={tok.i}, pos={tok.pos_}, ' +
                          f'ent={tok.ent_}: {tok}')
```

## zensols/nlp/tok.py

```diff
@@ -40,15 +40,16 @@
 
     """
     FEATURE_IDS_BY_TYPE: ClassVar[Dict[str, Set[str]]] = frozendict({
         'bool': frozenset(('is_space is_stop is_ent is_wh is_contraction ' +
                            'is_superlative is_pronoun').split()),
         'int': frozenset(('i idx i_sent sent_i is_punctuation tag ' +
                           'ent ent_iob dep shape norm_len').split()),
-        'str': frozenset('norm lemma_ tag_ pos_ ent_ ent_iob_ dep_ shape_'.split()),
+        'str': frozenset(('norm lemma_ tag_ pos_ ent_ ent_iob_ ' +
+                          'dep_ shape_').split()),
         'list': frozenset('children'.split()),
         'object': frozenset('lexspan'.split())})
     """Map of class type to set of feature IDs."""
 
     TYPES_BY_FEATURE_ID: ClassVar[Dict[str, str]] = frozendict(
         chain.from_iterable(
             map(lambda itm: map(lambda f: (f, itm[0]), itm[1]),
```

## Comparing `zensols.nlp-1.7.2.dist-info/METADATA` & `zensols.nlp-1.7.3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: zensols.nlp
-Version: 1.7.2
+Version: 1.7.3
 Summary: A utility library to assist in parsing natural language text.
 Home-page: https://github.com/plandes/nlparse
-Download-URL: https://github.com/plandes/nlparse/releases/download/v1.7.2/zensols.nlp-1.7.2-py3-none-any.whl
+Download-URL: https://github.com/plandes/nlparse/releases/download/v1.7.3/zensols.nlp-1.7.3-py3-none-any.whl
 Author: Paul Landes
 Author-email: landes@mailc.net
 Keywords: tooling
 Description-Content-Type: text/markdown
 Requires-Dist: spacy (~=3.2.0)
 Requires-Dist: msgpack (>=1.0.0)
 Requires-Dist: msgpack-numpy (>=0.4.7.1)
```

## Comparing `zensols.nlp-1.7.2.dist-info/RECORD` & `zensols.nlp-1.7.3.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 zensols/nlp/__init__.py,sha256=p3q2UPt0Xa7RSaML_rT9ueu4DGUYoxnBJZeaGqF5lks,154
-zensols/nlp/combine.py,sha256=YT-Ga73qGidFyRwf5vWmnoLo-_QriAASdtxcuWq8jc8,9681
+zensols/nlp/combine.py,sha256=AaC5FUN22Tli5g_nWxp8ROiOtuZfJ3_4jjWe0vECONU,10450
 zensols/nlp/component.py,sha256=rRj_NCIbMmbmZvaQSPo04jPDBHOeJYqNtbjS5-2OwGw,6724
 zensols/nlp/container.py,sha256=XPWydC89SX5MSqI-JuzDcXM9DYwrCCj5FZTCF9_GJDU,43376
 zensols/nlp/dataframe.py,sha256=Lue37IquvfVX6_hG_5L2pr-P8KrR0YaUNWQDhjyGg20,1395
 zensols/nlp/decorate.py,sha256=qUoqbVuaphcIDbMvc07jJFJtZx0wREQ2VTh3h4E08_M,4226
 zensols/nlp/domain.py,sha256=pwzkNbiJT8_beXXj2FYvTLAdbiwRZgxMuodfBM6hfQQ,8363
 zensols/nlp/nerscore.py,sha256=dzm9leret_KCyMAfU2Dj_gbfkpB6b6SlYdajCwvJ31w,6579
 zensols/nlp/norm.py,sha256=GTgZQzmBNNn_ZaxgulGAdhLCcqwzaPDnKgFJnd8jCZk,17214
 zensols/nlp/parser.py,sha256=EDtX1lbLql3YtzIUjm5wLf2_dMzhL-e930lx5IvFNy0,9198
 zensols/nlp/score.py,sha256=lx1owBX6Ycq3h4FeENkxfVWLVsShj_RvpujbVsrVDLs,21289
 zensols/nlp/serial.py,sha256=hNmEJXybFw2ICnexBWJ5TWit7tRjBJMLUpWFVSmvvkc,5856
 zensols/nlp/sparser.py,sha256=p6EvNXeGf92QNEd4neTL1-Noxr-mpj5HAD94xSqzB2w,19633
 zensols/nlp/stemmer.py,sha256=ZHIbU5UfzpYI8cMj096EqY_DRSof-EfjWWMN7_bCMMk,581
-zensols/nlp/tok.py,sha256=h_8Q15OKdExK04U7ghB-SLj0Hlvc8XCyQYX-SvJy-l8,18311
+zensols/nlp/tok.py,sha256=WqRQnDKBgDi1iuiasYfgPPgU5NhCFc4iBXRwk05G0Gk,18344
 zensols/nlp/resources/component.conf,sha256=SU5Yx_pW8olTvOMmVBrWbUCQ1on5D8LvpBJFo48NPsA,398
 zensols/nlp/resources/decorator.conf,sha256=Ug_w7RB6ZrHkBVG8ji47BmJHoOL7naqjYMncN9U1lpA,897
 zensols/nlp/resources/mapper.conf,sha256=OQtpye4uA8t_woIdUUsWfpM5cZ_2c-ZlYFmaCt9vMtM,823
 zensols/nlp/resources/obj.conf,sha256=vF93wu6kN5uIn7gw5uPZEPX0S6ncW1zbY3HkKygsc-M,1328
 zensols/nlp/resources/score.yml,sha256=wmr2OUrnYZL_T3K9MgyMJho3rHiYXeS3pQuF6t_kOo4,1441
 zensols/nlp/resources/serial.conf,sha256=PfvMIiWvk0dr08YQmCodlcxGdMgaX6AMFzrXIr0mgCw,420
-zensols.nlp-1.7.2.dist-info/METADATA,sha256=_OcKmzPUK7JtU5P4ssfUNBJbZT2M4tuUjbpe1Q12lWk,6694
-zensols.nlp-1.7.2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-zensols.nlp-1.7.2.dist-info/top_level.txt,sha256=NgD-P1jf-0xvfkWIxho1IVPkpl2JLBaIjIssgP_pkw8,12
-zensols.nlp-1.7.2.dist-info/RECORD,,
+zensols.nlp-1.7.3.dist-info/METADATA,sha256=ssfDKOLSsuDZjI9c-MKeCZsJUiz8s5rkC9clEJZcXFc,6694
+zensols.nlp-1.7.3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+zensols.nlp-1.7.3.dist-info/top_level.txt,sha256=NgD-P1jf-0xvfkWIxho1IVPkpl2JLBaIjIssgP_pkw8,12
+zensols.nlp-1.7.3.dist-info/RECORD,,
```

