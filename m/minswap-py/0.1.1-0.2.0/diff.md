# Comparing `tmp/minswap_py-0.1.1.tar.gz` & `tmp/minswap_py-0.2.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "minswap_py-0.1.1.tar", max compression
+gzip compressed data, was "minswap_py-0.2.0.tar", max compression
```

## Comparing `minswap_py-0.1.1.tar` & `minswap_py-0.2.0.tar`

### file list

```diff
@@ -1,12 +1,13 @@
--rw-r--r--   0        0        0     1074 2023-01-23 21:36:51.427567 minswap_py-0.1.1/LICENSE
--rw-r--r--   0        0        0     1166 2023-02-20 23:13:01.094267 minswap_py-0.1.1/pyproject.toml
--rw-r--r--   0        0        0     1127 2023-02-20 23:13:01.094267 minswap_py-0.1.1/README.md
--rw-r--r--   0        0        0       53 2023-01-28 00:43:18.210378 minswap_py-0.1.1/src/minswap/__init__.py
--rw-r--r--   0        0        0     1080 2023-02-12 16:40:20.127714 minswap_py-0.1.1/src/minswap/addr.py
--rw-r--r--   0        0        0     7004 2023-02-20 22:17:23.238233 minswap_py-0.1.1/src/minswap/assets.py
--rw-r--r--   0        0        0      308 2023-02-09 22:03:28.907989 minswap_py-0.1.1/src/minswap/models/__init__.py
--rw-r--r--   0        0        0    89436 2023-02-05 04:39:51.135770 minswap_py-0.1.1/src/minswap/models/blockfrost_models.py
--rw-r--r--   0        0        0    10379 2023-02-12 17:22:55.378554 minswap_py-0.1.1/src/minswap/models/common.py
--rw-r--r--   0        0        0    13649 2023-02-20 22:16:44.018664 minswap_py-0.1.1/src/minswap/pools.py
--rw-r--r--   0        0        0     1951 1970-01-01 00:00:00.000000 minswap_py-0.1.1/setup.py
--rw-r--r--   0        0        0     1957 1970-01-01 00:00:00.000000 minswap_py-0.1.1/PKG-INFO
+-rw-r--r--   0        0        0     1074 2023-01-23 21:36:51.427567 minswap_py-0.2.0/LICENSE
+-rw-r--r--   0        0        0     1271 2023-06-29 12:52:22.149307 minswap_py-0.2.0/pyproject.toml
+-rw-r--r--   0        0        0     1645 2023-06-29 12:52:22.151307 minswap_py-0.2.0/README.md
+-rw-r--r--   0        0        0      167 2023-05-24 02:47:34.932526 minswap_py-0.2.0/src/minswap/__init__.py
+-rw-r--r--   0        0        0    17447 2023-06-29 12:29:11.317311 minswap_py-0.2.0/src/minswap/addr.py
+-rw-r--r--   0        0        0    29962 2023-06-29 12:29:11.328310 minswap_py-0.2.0/src/minswap/assets.py
+-rw-r--r--   0        0        0      382 2023-05-04 19:06:27.065397 minswap_py-0.2.0/src/minswap/models/__init__.py
+-rw-r--r--   0        0        0    92403 2023-06-29 02:38:21.320380 minswap_py-0.2.0/src/minswap/models/blockfrost_models.py
+-rw-r--r--   0        0        0     8715 2023-06-29 11:57:19.580680 minswap_py-0.2.0/src/minswap/models/common.py
+-rw-r--r--   0        0        0    12147 2023-05-24 01:37:34.553330 minswap_py-0.2.0/src/minswap/pools.py
+-rw-r--r--   0        0        0    13096 2023-06-29 12:03:25.120634 minswap_py-0.2.0/src/minswap/transactions.py
+-rw-r--r--   0        0        0     8849 2023-06-29 11:59:53.375600 minswap_py-0.2.0/src/minswap/utils.py
+-rw-r--r--   0        0        0     2634 1970-01-01 00:00:00.000000 minswap_py-0.2.0/PKG-INFO
```

### Comparing `minswap_py-0.1.1/LICENSE` & `minswap_py-0.2.0/LICENSE`

 * *Files identical despite different names*

### Comparing `minswap_py-0.1.1/pyproject.toml` & `minswap_py-0.2.0/pyproject.toml`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "minswap-py"
-version = "0.1.1"
+version = "0.2.0"
 description = ""
 authors = ["eldermillenial <eldermillenial@protonmail.com>"]
 readme = "README.md"
 packages = [{include = "minswap", from = "src"}]
 license = "MIT"
 repository = "https://github.com/theeldermillenial/minswap-py"
 
@@ -13,17 +13,22 @@
 
 [tool.poetry.dependencies]
 python = "^3.8.1"
 blockfrost-python = "0.5.2"
 pycardano = "0.7.2"
 pydantic = "1.10.4"
 python-dotenv = "0.21.1"
+llvmlite = "^0.39.1"
+numba = "^0.56.4"
+vaex = "^4.16.0"
+tqdm = "^4.65.0"
 
 [tool.poetry.group.dev.dependencies]
 nox = "2022.11.21"
+poetry = "^1.3.2"
 nox-poetry = "1.0.2"
 pytest = "7.2.1"
 black = "22.12.0"
 datamodel-code-generator = {extras = ["http"], version = "^0.16.1"}
 bump2version = "^1.0.1"
 mypy = "^0.991"
 flake8 = "^6.0.0"
@@ -38,12 +43,12 @@
 packaging = "^23.0"
 pre-commit = "^3.0.1"
 
 [tool.isort]
 profile = "black"
 
 [tool.mypy]
-exclude = ['^blockfrost\.py$', 'tests/']
+exclude = ['^blockfrost\.py$', 'tests/', 'examples/*']
 
 [build-system]
 requires = ["poetry-core"]
 build-backend = "poetry.core.masonry.api"
```

### Comparing `minswap_py-0.1.1/src/minswap/models/blockfrost_models.py` & `minswap_py-0.2.0/src/minswap/models/blockfrost_models.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,43 +1,43 @@
 # generated by datamodel-codegen:
 #   filename:  openapi.yaml
-#   timestamp: 2023-01-31T11:47:38+00:00
+#   timestamp: 2023-06-02T01:54:33+00:00
 
 from __future__ import annotations
 
 from enum import Enum
 from typing import Any, Dict, List, Optional, Union
 
 from pydantic import BaseModel, Extra, Field
 
 
 class BlockContent(BaseModel):
     time: int = Field(..., example=1641338934)
     """
     Block creation time in UNIX time
     """
-    height: int = Field(..., example=15243593)
+    height: Optional[int] = Field(..., example=15243593)
     """
     Block number
     """
     hash: str = Field(
         ..., example="4ea1ba291e8eef538635a53e59fddba7810d1679631cc3aed7c8e6c4091a516a"
     )
     """
     Hash of the block
     """
-    slot: int = Field(..., example=412162133)
+    slot: Optional[int] = Field(..., example=412162133)
     """
     Slot number
     """
-    epoch: int = Field(..., example=425)
+    epoch: Optional[int] = Field(..., example=425)
     """
     Epoch number
     """
-    epoch_slot: int = Field(..., example=12)
+    epoch_slot: Optional[int] = Field(..., example=12)
     """
     Slot within the epoch
     """
     slot_leader: str = Field(
         ..., example="pool1pu5jlj4q9w9jlxeu370a3c9myx47md5j5m2str0naunn2qnikdy"
     )
     """
@@ -47,48 +47,48 @@
     """
     Block size in Bytes
     """
     tx_count: int = Field(..., example=1)
     """
     Number of transactions in the block
     """
-    output: str = Field(..., example="128314491794")
+    output: Optional[str] = Field(..., example="128314491794")
     """
     Total output within the block in Lovelaces
     """
-    fees: str = Field(..., example="592661")
+    fees: Optional[str] = Field(..., example="592661")
     """
     Total fees within the block in Lovelaces
     """
-    block_vrf: str = Field(
+    block_vrf: Optional[str] = Field(
         ...,
         example="vrf_vk1wf2k6lhujezqcfe00l6zetxpnmh9n6mwhpmhm0dvfh3fxgmdnrfqkms8ty",
         max_length=65,
         min_length=65,
     )
     """
     VRF key of the block
     """
-    op_cert: str = Field(
+    op_cert: Optional[str] = Field(
         ..., example="da905277534faf75dae41732650568af545134ee08a3c0392dbefc8096ae177c"
     )
     """
     The hash of the operational certificate of the block producer
     """
-    op_cert_counter: str = Field(..., example="18")
+    op_cert_counter: Optional[str] = Field(..., example="18")
     """
     The value of the counter used to produce the operational certificate
     """
-    previous_block: str = Field(
+    previous_block: Optional[str] = Field(
         ..., example="43ebccb3ac72c7cebd0d9b755a4b08412c9f5dcb81b8a0ad1e3c197d29d47b05"
     )
     """
     Hash of the previous block
     """
-    next_block: str = Field(
+    next_block: Optional[str] = Field(
         ..., example="8367f026cf4b03e116ff8ee5daf149b55ba5a6ec6dec04803b8dc317721d15fa"
     )
     """
     Hash of the next block
     """
     confirmations: int = Field(..., example=4698)
     """
@@ -227,15 +227,15 @@
     """
     Sum of all the transactions within the epoch in Lovelaces
     """
     fees: str = Field(..., example="4203312194")
     """
     Sum of all the fees within the epoch in Lovelaces
     """
-    active_stake: str = Field(..., example="784953934049314")
+    active_stake: Optional[str] = Field(..., example="784953934049314")
     """
     Sum of all the active stakes within the epoch in Lovelaces
     """
 
 
 class EpochParamContent(BaseModel):
     epoch: int = Field(..., example=225)
@@ -290,15 +290,15 @@
     """
     Treasury expansion
     """
     decentralisation_param: float = Field(..., example=0.5)
     """
     Percentage of blocks produced by federated nodes
     """
-    extra_entropy: str
+    extra_entropy: Optional[str]
     """
     Seed for extra entropy
     """
     protocol_major_ver: int = Field(..., example=2)
     """
     Accepted protocol major version
     """
@@ -316,15 +316,15 @@
     """
     nonce: str = Field(
         ..., example="1a3be38bcbb7911969283716ad7aa550250226b76a61fc51cc9a9a35d9276d81"
     )
     """
     Epoch number only used once
     """
-    cost_models: Dict[str, Any] = Field(
+    cost_models: Optional[Dict[str, Any]] = Field(
         ...,
         example={
             "PlutusV1": {
                 "addInteger-cpu-arguments-intercept": 197209,
                 "addInteger-cpu-arguments-slope": 0,
             },
             "PlutusV2": {
@@ -332,55 +332,55 @@
                 "addInteger-cpu-arguments-slope": 0,
             },
         },
     )
     """
     Cost models parameters for Plutus Core scripts
     """
-    price_mem: float = Field(..., example=0.0577)
+    price_mem: Optional[float] = Field(..., example=0.0577)
     """
     The per word cost of script memory usage
     """
-    price_step: float = Field(..., example=7.21e-05)
+    price_step: Optional[float] = Field(..., example=7.21e-05)
     """
     The cost of script execution step usage
     """
-    max_tx_ex_mem: str = Field(..., example="10000000")
+    max_tx_ex_mem: Optional[str] = Field(..., example="10000000")
     """
     The maximum number of execution memory allowed to be used in a single transaction
     """
-    max_tx_ex_steps: str = Field(..., example="10000000000")
+    max_tx_ex_steps: Optional[str] = Field(..., example="10000000000")
     """
     The maximum number of execution steps allowed to be used in a single transaction
     """
-    max_block_ex_mem: str = Field(..., example="50000000")
+    max_block_ex_mem: Optional[str] = Field(..., example="50000000")
     """
     The maximum number of execution memory allowed to be used in a single block
     """
-    max_block_ex_steps: str = Field(..., example="40000000000")
+    max_block_ex_steps: Optional[str] = Field(..., example="40000000000")
     """
     The maximum number of execution steps allowed to be used in a single block
     """
-    max_val_size: str = Field(..., example="5000")
+    max_val_size: Optional[str] = Field(..., example="5000")
     """
     The maximum Val size
     """
-    collateral_percent: int = Field(..., example=150)
+    collateral_percent: Optional[int] = Field(..., example=150)
     """
     The percentage of the transactions fee which must be provided as collateral when including non-native scripts
     """
-    max_collateral_inputs: int = Field(..., example=3)
+    max_collateral_inputs: Optional[int] = Field(..., example=3)
     """
     The maximum number of collateral inputs allowed in a transaction
     """
-    coins_per_utxo_size: str = Field(..., example="34482")
+    coins_per_utxo_size: Optional[str] = Field(..., example="34482")
     """
     Cost per UTxO word for Alonzo. Cost per UTxO byte for Babbage and later.
     """
-    coins_per_utxo_word: str = Field(..., example="34482")
+    coins_per_utxo_word: Optional[str] = Field(..., example="34482")
     """
     Cost per UTxO word for Alonzo. Cost per UTxO byte for Babbage and later.
     """
 
 
 class EpochContentArray(BaseModel):
     __root__: List[EpochContent]
@@ -499,19 +499,19 @@
     """
     Deposit within the transaction in Lovelaces
     """
     size: int = Field(..., example=433)
     """
     Size of the transaction in Bytes
     """
-    invalid_before: str
+    invalid_before: Optional[str]
     """
     Left (included) endpoint of the timelock validity intervals
     """
-    invalid_hereafter: str = Field(..., example="13885913")
+    invalid_hereafter: Optional[str] = Field(..., example="13885913")
     """
     Right (excluded) endpoint of the timelock validity intervals
     """
     utxo_count: int = Field(..., example=4)
     """
     Count of UTXOs within the transaction
     """
@@ -592,25 +592,25 @@
     """
     Hash of the UTXO transaction
     """
     output_index: int = Field(..., example=0)
     """
     UTXO index in the transaction
     """
-    data_hash: str = Field(
+    data_hash: Optional[str] = Field(
         ..., example="9e478573ab81ea7a8e31891ce0648b81229f408d596a3483e6f4f9b92d3cf710"
     )
     """
     The hash of the transaction output datum
     """
-    inline_datum: str = Field(..., example="19a6aa")
+    inline_datum: Optional[str] = Field(..., example="19a6aa")
     """
     CBOR encoded inline datum
     """
-    reference_script_hash: str = Field(
+    reference_script_hash: Optional[str] = Field(
         ..., example="13a3efd825703a352a8f71f4e2758d08c28c564e8dfcce9f77776ad1"
     )
     """
     The hash of the reference script of the input
     """
     collateral: bool = Field(..., example=False)
     """
@@ -655,29 +655,29 @@
             },
         ],
     )
     output_index: int = Field(..., example=0)
     """
     UTXO index in the transaction
     """
-    data_hash: str = Field(
+    data_hash: Optional[str] = Field(
         ..., example="9e478573ab81ea7a8e31891ce0648b81229f408d596a3483e6f4f9b92d3cf710"
     )
     """
     The hash of the transaction output datum
     """
-    inline_datum: str = Field(..., example="19a6aa")
+    inline_datum: Optional[str] = Field(..., example="19a6aa")
     """
     CBOR encoded inline datum
     """
     collateral: bool = Field(..., example=False)
     """
     Whether the output is a collateral output
     """
-    reference_script_hash: str = Field(
+    reference_script_hash: Optional[str] = Field(
         ..., example="13a3efd825703a352a8f71f4e2758d08c28c564e8dfcce9f77776ad1"
     )
     """
     The hash of the reference script of the output
     """
 
 
@@ -792,56 +792,56 @@
 
 
 class TxContentMirs(BaseModel):
     __root__: List[TxContentMir]
 
 
 class Metadata(BaseModel):
-    url: str = Field(..., example="https://stakenuts.com/mainnet.json")
+    url: Optional[str] = Field(..., example="https://stakenuts.com/mainnet.json")
     """
     URL to the stake pool metadata
     """
-    hash: str = Field(
+    hash: Optional[str] = Field(
         ..., example="47c0c68cb57f4a5b4a87bad896fc274678e7aea98e200fa14a1cb40c0cab1d8c"
     )
     """
     Hash of the metadata file
     """
-    ticker: str = Field(..., example="NUTS")
+    ticker: Optional[str] = Field(..., example="NUTS")
     """
     Ticker of the stake pool
     """
-    name: str = Field(..., example="Stake Nuts")
+    name: Optional[str] = Field(..., example="Stake Nuts")
     """
     Name of the stake pool
     """
-    description: str = Field(..., example="The best pool ever")
+    description: Optional[str] = Field(..., example="The best pool ever")
     """
     Description of the stake pool
     """
-    homepage: str = Field(..., example="https://stakentus.com/")
+    homepage: Optional[str] = Field(..., example="https://stakentus.com/")
     """
     Home page of the stake pool
     """
 
 
 class Relay(BaseModel):
-    ipv4: str = Field(..., example="4.4.4.4")
+    ipv4: Optional[str] = Field(..., example="4.4.4.4")
     """
     IPv4 address of the relay
     """
-    ipv6: str = Field(..., example="https://stakenuts.com/mainnet.json")
+    ipv6: Optional[str] = Field(..., example="https://stakenuts.com/mainnet.json")
     """
     IPv6 address of the relay
     """
-    dns: str = Field(..., example="relay1.stakenuts.com")
+    dns: Optional[str] = Field(..., example="relay1.stakenuts.com")
     """
     DNS name of the relay
     """
-    dns_srv: str = Field(..., example="_relays._tcp.relays.stakenuts.com")
+    dns_srv: Optional[str] = Field(..., example="_relays._tcp.relays.stakenuts.com")
     """
     DNS SRV entry of the relay
     """
     port: int = Field(..., example=3001)
     """
     Network port of the relay
     """
@@ -881,15 +881,15 @@
     )
     """
     Bech32 reward account of the stake pool
     """
     owners: List[str] = Field(
         ..., example=["stake1u98nnlkvkk23vtvf9273uq7cph5ww6u2yq2389psuqet90sv4xv9v"]
     )
-    metadata: Metadata
+    metadata: Optional[Metadata]
     relays: List[Relay]
     active_epoch: int = Field(..., example=210)
     """
     Epoch in which the update becomes active
     """
 
 
@@ -953,19 +953,19 @@
 
 
 class TxContentMetadataCborItem(BaseModel):
     label: str
     """
     Metadata label
     """
-    cbor_metadata: str
+    cbor_metadata: Optional[str]
     """
     Content of the CBOR metadata
     """
-    metadata: str
+    metadata: Optional[str]
     """
     Content of the CBOR metadata in hex
     """
 
 
 class TxContentMetadataCbor(BaseModel):
     __root__: List[TxContentMetadataCborItem] = Field(
@@ -1043,15 +1043,15 @@
     """
     Bech32 stake address
     """
     active: bool = Field(..., example=True)
     """
     Registration state of an account
     """
-    active_epoch: int = Field(..., example=412)
+    active_epoch: Optional[int] = Field(..., example=412)
     """
     Epoch of the most recent action - registration or deregistration
     """
     controlled_amount: str = Field(..., example="619154618165")
     """
     Balance of the account in Lovelaces
     """
@@ -1071,15 +1071,15 @@
     """
     Sum of all funds from treasury for the account in the Lovelaces
     """
     withdrawable_amount: str = Field(..., example="319154618165")
     """
     Sum of available rewards that haven't been withdrawn yet for the account in the Lovelaces
     """
-    pool_id: str = Field(
+    pool_id: Optional[str] = Field(
         ..., example="pool1pu5jlj4q9w9jlxeu370a3c9myx47md5j5m2str0naunn2q3lkdy"
     )
     """
     Bech32 pool ID that owns the account
     """
 
 
@@ -1497,19 +1497,19 @@
     """
     Deposit within the transaction in Lovelaces
     """
     size: int = Field(..., example=433)
     """
     Size of the transaction in Bytes
     """
-    invalid_before: str
+    invalid_before: Optional[str]
     """
     Left (included) endpoint of the timelock validity intervals
     """
-    invalid_hereafter: str = Field(..., example="13885913")
+    invalid_hereafter: Optional[str] = Field(..., example="13885913")
     """
     Right (excluded) endpoint of the timelock validity intervals
     """
     utxo_count: int = Field(..., example=4)
     """
     Count of UTXOs within the transaction
     """
@@ -1548,14 +1548,21 @@
     valid_contract: bool = Field(..., example=True)
     """
     True if contract script passed validation
     """
 
 
 class Input1(BaseModel):
+    address: Optional[str] = Field(
+        None,
+        example="addr1q9ld26v2lv8wvrxxmvg90pn8n8n5k6tdst06q2s856rwmvnueldzuuqmnsye359fqrk8hwvenjnqultn7djtrlft7jnq7dy7wv",
+    )
+    """
+    Input address
+    """
     tx_hash: str = Field(
         ..., example="1a0570af966fb355a7160e4f82d5a80b8681b7955f5d44bec0dce628516157f0"
     )
     """
     Hash of the UTXO transaction
     """
     output_index: int = Field(..., example=0)
@@ -1605,29 +1612,29 @@
             },
         ],
     )
     output_index: int = Field(..., example=0)
     """
     UTXO index in the transaction
     """
-    data_hash: str = Field(
+    data_hash: Optional[str] = Field(
         ..., example="9e478573ab81ea7a8e31891ce0648b81229f408d596a3483e6f4f9b92d3cf710"
     )
     """
     The hash of the transaction output datum
     """
-    inline_datum: str = Field(..., example="19a6aa")
+    inline_datum: Optional[str] = Field(..., example="19a6aa")
     """
     CBOR encoded inline datum
     """
     collateral: bool = Field(..., example=False)
     """
     Whether the output is a collateral output
     """
-    reference_script_hash: str = Field(
+    reference_script_hash: Optional[str] = Field(
         ..., example="13a3efd825703a352a8f71f4e2758d08c28c564e8dfcce9f77776ad1"
     )
     """
     The hash of the reference script of the output
     """
 
 
@@ -1664,20 +1671,38 @@
 class MempoolTxContent(BaseModel):
     tx: Tx
     inputs: List[Input1]
     outputs: List[Output1]
     redeemers: Optional[List[Redeemer]] = None
 
 
+class MempoolAddressesContentItem(BaseModel):
+    tx_hash: str
+    """
+    Hash of the transaction
+    """
+
+
+class MempoolAddressesContent(BaseModel):
+    __root__: List[MempoolAddressesContentItem] = Field(
+        ...,
+        example=[
+            {
+                "tx_hash": "1a0570af966fb355a7160e4f82d5a80b8681b7955f5d44bec0dce628516157f0"
+            }
+        ],
+    )
+
+
 class TxMetadataLabel(BaseModel):
     label: str
     """
     Metadata label
     """
-    cip10: str
+    cip10: Optional[str]
     """
     CIP10 defined description
     """
     count: str
     """
     The count of metadata entries with a specific label
     """
@@ -1703,15 +1728,15 @@
 
 
 class TxMetadataLabelJsonItem(BaseModel):
     tx_hash: str
     """
     Transaction hash that contains the specific metadata
     """
-    json_metadata: Union[str, Dict[str, Any], List, int, float, bool]
+    json_metadata: Optional[Union[str, Dict[str, Any], List, int, float, bool]]
     """
     Content of the JSON metadata
     """
 
 
 class TxMetadataLabelJson(BaseModel):
     __root__: List[TxMetadataLabelJsonItem] = Field(
@@ -1742,19 +1767,19 @@
 
 
 class TxMetadataLabelCborItem(BaseModel):
     tx_hash: str
     """
     Transaction hash that contains the specific metadata
     """
-    cbor_metadata: str
+    cbor_metadata: Optional[str]
     """
     Content of the CBOR metadata
     """
-    metadata: str
+    metadata: Optional[str]
     """
     Content of the CBOR metadata in hex
     """
 
 
 class TxMetadataLabelCbor(BaseModel):
     __root__: List[TxMetadataLabelCborItem] = Field(
@@ -1817,15 +1842,15 @@
             {"unit": "lovelace", "quantity": "42000000"},
             {
                 "unit": "b0d07d45fe9514f80213f4020e5a61241458be626841cde717cb38a76e7574636f696e",
                 "quantity": "12",
             },
         ],
     )
-    stake_address: str = Field(
+    stake_address: Optional[str] = Field(
         ..., example="stake1ux3g2c9dx2nhhehyrezyxpkstartcqmu9hk63qgfkccw5rqttygt7"
     )
     """
     Stake address that controls the key
     """
     type: Type1 = Field(..., example="shelley")
     """
@@ -1846,15 +1871,15 @@
     """
     The unit of the value
     """
     quantity: str
     """
     The quantity of the unit
     """
-    decimals: int
+    decimals: Optional[int]
     """
     Number of decimal places of the asset unit. Primary data source is CIP68 reference NFT with a fallback to off-chain metadata.
     """
     has_nft_onchain_metadata: bool
     """
     True if the latest minting transaction includes metadata (best-effort)
     """
@@ -1890,15 +1915,15 @@
                 "unit": "b0d07d45fe9514f80213f4020e5a61241458be626841cde717cb38a76e7574636f696e",
                 "quantity": "12",
                 "decimals": None,
                 "has_nft_onchain_metadata": True,
             },
         ],
     )
-    stake_address: str = Field(
+    stake_address: Optional[str] = Field(
         ..., example="stake1ux3g2c9dx2nhhehyrezyxpkstartcqmu9hk63qgfkccw5rqttygt7"
     )
     """
     Stake address that controls the key
     """
     type: Type2 = Field(..., example="shelley")
     """
@@ -2010,23 +2035,23 @@
     UTXO index in the transaction
     """
     amount: List[AmountItem5]
     block: str
     """
     Block hash of the UTXO
     """
-    data_hash: str
+    data_hash: Optional[str]
     """
     The hash of the transaction output datum
     """
-    inline_datum: str = Field(..., example="19a6aa")
+    inline_datum: Optional[str] = Field(..., example="19a6aa")
     """
     CBOR encoded inline datum
     """
-    reference_script_hash: str = Field(
+    reference_script_hash: Optional[str] = Field(
         ..., example="13a3efd825703a352a8f71f4e2758d08c28c564e8dfcce9f77776ad1"
     )
     """
     The hash of the reference script of the output
     """
 
 
@@ -2335,60 +2360,60 @@
     """
     hex: str = Field(
         ..., example="0f292fcaa02b8b2f9b3c8f9fd8e0bb21abedb692a6d5058df3ef2735"
     )
     """
     Hexadecimal pool ID
     """
-    url: str = Field(..., example="https://stakenuts.com/mainnet.json")
+    url: Optional[str] = Field(..., example="https://stakenuts.com/mainnet.json")
     """
     URL to the stake pool metadata
     """
-    hash: str = Field(
+    hash: Optional[str] = Field(
         ..., example="47c0c68cb57f4a5b4a87bad896fc274678e7aea98e200fa14a1cb40c0cab1d8c"
     )
     """
     Hash of the metadata file
     """
-    ticker: str = Field(..., example="NUTS")
+    ticker: Optional[str] = Field(..., example="NUTS")
     """
     Ticker of the stake pool
     """
-    name: str = Field(..., example="Stake Nuts")
+    name: Optional[str] = Field(..., example="Stake Nuts")
     """
     Name of the stake pool
     """
-    description: str = Field(..., example="The best pool ever")
+    description: Optional[str] = Field(..., example="The best pool ever")
     """
     Description of the stake pool
     """
-    homepage: str = Field(..., example="https://stakentus.com/")
+    homepage: Optional[str] = Field(..., example="https://stakentus.com/")
     """
     Home page of the stake pool
     """
 
 
 class EmptyObject(BaseModel):
     pass
 
 
 class PoolRelay(BaseModel):
-    ipv4: str = Field(..., example="4.4.4.4")
+    ipv4: Optional[str] = Field(..., example="4.4.4.4")
     """
     IPv4 address of the relay
     """
-    ipv6: str = Field(..., example="https://stakenuts.com/mainnet.json")
+    ipv6: Optional[str] = Field(..., example="https://stakenuts.com/mainnet.json")
     """
     IPv6 address of the relay
     """
-    dns: str = Field(..., example="relay1.stakenuts.com")
+    dns: Optional[str] = Field(..., example="relay1.stakenuts.com")
     """
     DNS name of the relay
     """
-    dns_srv: str = Field(..., example="_relays._tcp.relays.stakenuts.com")
+    dns_srv: Optional[str] = Field(..., example="_relays._tcp.relays.stakenuts.com")
     """
     DNS SRV entry of the relay
     """
     port: int = Field(..., example=3001)
     """
     Network port of the relay
     """
@@ -2524,14 +2549,15 @@
     If on-chain metadata passes validation, we display the standard
     under which it is valid
 
     """
 
     CIP25v1 = "CIP25v1"
     CIP25v2 = "CIP25v2"
+    CIP68v1 = "CIP68v1"
 
 
 class Metadata1(BaseModel):
     """
     Off-chain metadata fetched from GitHub based on network.
     Mainnet: https://github.com/cardano-foundation/cardano-token-registry/
     Testnet: https://github.com/input-output-hk/metadata-registry-testnet/
@@ -2542,27 +2568,27 @@
     """
     Asset name
     """
     description: str = Field(..., example="The Nut Coin")
     """
     Asset description
     """
-    ticker: str = Field(..., example="nutc")
-    url: str = Field(..., example="https://www.stakenuts.com/")
+    ticker: Optional[str] = Field(..., example="nutc")
+    url: Optional[str] = Field(..., example="https://www.stakenuts.com/")
     """
     Asset website
     """
-    logo: str = Field(
+    logo: Optional[str] = Field(
         ...,
         example="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",
     )
     """
     Base64 encoded logo of the asset
     """
-    decimals: int = Field(..., example=6, le=255)
+    decimals: Optional[int] = Field(..., example=6, le=255.0)
     """
     Number of decimal places of the asset unit
     """
 
 
 class Asset1(BaseModel):
     asset: str = Field(
@@ -2574,15 +2600,15 @@
     """
     policy_id: str = Field(
         ..., example="b0d07d45fe9514f80213f4020e5a61241458be626841cde717cb38a7"
     )
     """
     Policy ID of the asset
     """
-    asset_name: str = Field(..., example="6e7574636f696e")
+    asset_name: Optional[str] = Field(..., example="6e7574636f696e")
     """
     Hex-encoded asset name of the asset
     """
     fingerprint: str = Field(
         ..., example="asset1pkpwyknlvul7az0xx8czhl60pyel45rpje4z8w"
     )
     """
@@ -2598,28 +2624,33 @@
     """
     ID of the initial minting transaction
     """
     mint_or_burn_count: int = Field(..., example=1)
     """
     Count of mint and burn transactions
     """
-    onchain_metadata: Dict[str, Any]
+    onchain_metadata: Optional[Dict[str, Any]]
     """
     On-chain metadata which SHOULD adhere to the valid standards,
     based on which we perform the look up and display the asset
     (best effort)
 
     """
     onchain_metadata_standard: Optional[OnchainMetadataStandard] = None
     """
     If on-chain metadata passes validation, we display the standard
     under which it is valid
 
     """
-    metadata: Metadata1
+    onchain_metadata_extra: Optional[str] = None
+    """
+    Arbitrary plutus data (CIP68).
+
+    """
+    metadata: Optional[Metadata1]
     """
     Off-chain metadata fetched from GitHub based on network.
     Mainnet: https://github.com/cardano-foundation/cardano-token-registry/
     Testnet: https://github.com/input-output-hk/metadata-registry-testnet/
 
     """
 
@@ -2824,29 +2855,31 @@
     """
     Script hash
     """
     type: Type3 = Field(..., example="plutusV1")
     """
     Type of the script language
     """
-    serialised_size: int = Field(..., example=3119)
+    serialised_size: Optional[int] = Field(..., example=3119)
     """
     The size of the CBOR serialised script, if a Plutus script
     """
 
 
 class ScriptJson(BaseModel):
-    json_: Union[str, Dict[str, Any], List, int, float, bool] = Field(..., alias="json")
+    json_: Optional[Union[str, Dict[str, Any], List, int, float, bool]] = Field(
+        ..., alias="json"
+    )
     """
     JSON contents of the `timelock` script, null for `plutus` scripts
     """
 
 
 class ScriptCbor(BaseModel):
-    cbor: str
+    cbor: Optional[str]
     """
     CBOR contents of the `plutus` script, null for `timelocks`
     """
 
 
 class Purpose2(Enum):
     """
@@ -2901,15 +2934,15 @@
 
 
 class ScriptRedeemers(BaseModel):
     __root__: List[ScriptRedeemer]
 
 
 class ScriptDatum(BaseModel):
-    json_value: Any
+    json_value: Dict[str, Any]
     """
     JSON content of the datum
     """
 
 
 class ScriptDatumCbor(BaseModel):
     cbor: str
@@ -3149,15 +3182,15 @@
     """
     metadata_hash: str = Field(
         ..., example="6bf124f217d0e5a0a8adb1dbd8540e1334280d49ab861127868339f43b3948af"
     )
     """
     Hash of the metadata file
     """
-    metadata: Dict[str, Any]
+    metadata: Optional[Dict[str, Any]]
     """
     The cached metadata of the `metadata_url` file.
     """
 
 
 class NutlinkAddressTicker(BaseModel):
     name: str
@@ -3392,17 +3425,74 @@
     mediaType: Optional[str] = Field(None, example="image/jpeg")
     """
     Mime sub-type of image
     """
     files: Optional[List[File1]] = None
 
 
+class File2(BaseModel):
+    class Config:
+        extra = Extra.allow
+
+    name: Optional[str] = Field(None, example="myimage")
+    """
+    Name of the file
+    """
+    mediaType: str = Field(..., example="image/jpeg")
+    """
+    Mime sub-type of image
+    """
+    src: Union[str, List[str]] = Field(..., example="My NFT token description")
+    """
+    URI pointing to a resource of this mime type
+    """
+
+
+class AssetOnchainMetadataCip68Rft444(BaseModel):
+    """
+    On-chain metadata stored in the datum of the reference NFT output
+    which adheres to 222 NFT Standard https://cips.cardano.org/cips/cip68/
+
+    """
+
+    class Config:
+        extra = Extra.allow
+
+    name: str = Field(..., example="My NFT token")
+    """
+    Name of the asset
+    """
+    image: str = Field(
+        ..., example="ipfs://ipfs/QmfKyJ4tuvHowwKQCbCHj4L5T3fSj8cjs7Aau8V7BWv226"
+    )
+    """
+    URI(s) of the associated asset
+    """
+    description: Optional[str] = Field(None, example="My NFT token description")
+    """
+    Additional description
+    """
+    mediaType: Optional[str] = Field(None, example="image/jpeg")
+    """
+    Mime sub-type of image
+    """
+    decimals: Optional[float] = Field(None, example=8)
+    """
+    Number of decimals
+    """
+    files: Optional[List[File2]] = None
+
+
 class OnchainMetadataCip25(BaseModel):
     __root__: AssetOnchainMetadataCip25
 
 
 class OnchainMetadataCip68Ft333(BaseModel):
     __root__: AssetOnchainMetadataCip68Ft333
 
 
 class OnchainMetadataCip68Nft222(BaseModel):
     __root__: AssetOnchainMetadataCip68Nft222
+
+
+class OnchainMetadataCip68Rft444(BaseModel):
+    __root__: AssetOnchainMetadataCip68Rft444
```

### Comparing `minswap_py-0.1.1/src/minswap/models/common.py` & `minswap_py-0.2.0/src/minswap/models/common.py`

 * *Files 24% similar despite different names*

```diff
@@ -7,15 +7,15 @@
 from collections.abc import Iterable
 from datetime import datetime
 from enum import Enum
 from typing import Any, Dict, List, Optional, Union
 
 import pycardano
 from blockfrost import Namespace
-from pydantic import BaseModel, Field, root_validator, validator
+from pydantic import BaseModel, root_validator
 
 from minswap.models import blockfrost_models
 
 
 def to_dict(
     values: Union[Namespace, List[Any], Dict[str, Any]]
 ) -> Union[List[Any], Dict[str, Any]]:
@@ -62,14 +62,59 @@
 
     tx_hash: str
     tx_index: int
     block_height: int
     time: datetime
 
 
+class PoolTransactionReference(BaseModel):
+    """A reference to a pool transaction state."""
+
+    tx_index: int
+    tx_hash: str
+    block_height: int
+    block_time: datetime
+
+    @root_validator(pre=True)
+    def _validator(cls, values):
+        values["block_time"] = datetime.utcfromtimestamp(values["block_time"])
+
+        return values
+
+    class Config:  # noqa: D106
+        allow_mutation = False
+        extra = "forbid"
+
+
+class Transaction(blockfrost_models.TxContent):
+    """Transaction Content."""
+
+    block_time: datetime = blockfrost_models.TxContent.__fields__[
+        "block_time"
+    ]  # type: ignore
+
+    @root_validator(pre=True)
+    def _validator(cls, values):
+        values["block_time"] = datetime.utcfromtimestamp(values["block_time"])
+
+        return values
+
+
+class AssetHistoryReference(BaseModel):
+    """A reference to a pool transaction state."""
+
+    tx_hash: str
+    action: str
+    amount: int
+
+    class Config:  # noqa: D106
+        allow_mutation = False
+        extra = "forbid"
+
+
 class BaseList(BaseModel):
     """Utility class for list models."""
 
     def __iter__(self):  # noqa
         return iter(self.__root__)
 
     def __getitem__(self, item):  # noqa
@@ -91,18 +136,15 @@
         return self.__root__.keys()
 
     def values(self):
         """Return iterable of values."""
         return self.__root__.values()
 
     def __getitem__(self, item):  # noqa
-        try:
-            super().__getitem__(item)
-        except KeyError:
-            self.__root__.items()[item]
+        return self.__root__.get(item, 0)
 
 
 class TxIn(BaseModel):
     """A quantity of a blockchain asset."""
 
     tx_hash: str
     tx_index: int
@@ -134,28 +176,42 @@
 
     def quantity(self, index: int = 0):
         """Quantity of the asset at `index`."""
         return list(self.values())[index]
 
     @root_validator(pre=True)
     def _digest_assets(cls, values):
-
-        root: Dict[str, int] = {}
         if "__root__" in values:
             root = values["__root__"]
         elif "values" in values and isinstance(values["values"], list):
             root = {v.unit: v.quantity for v in values["values"]}
         else:
             root = {k: v for k, v in values.items()}
         root = dict(
             sorted(root.items(), key=lambda x: "" if x[0] == "lovelace" else x[0])
         )
 
         return {"__root__": root}
 
+    def __add__(a, b):
+        """Add two assets."""
+        intersection = set(a.keys()) | set(b.keys())
+
+        result = {key: a[key] + b[key] for key in intersection}
+
+        return Assets(**result)
+
+    def __sub__(a, b):
+        """Add two assets."""
+        intersection = set(a.keys()) | set(b.keys())
+
+        result = {key: a[key] - b[key] for key in intersection}
+
+        return Assets(**result)
+
 
 class Address(BaseModel):
     """A Cardano address.
 
     This class holds Cardano address information, including payment, stake, and script
     addresses. The input should be the `bech32` encoded address.
     """
@@ -190,72 +246,40 @@
 
         return values
 
 
 class OnchainMetadata(blockfrost_models.AssetOnchainMetadataCip25):
     """Data class to hold on chain metadata for an asset."""
 
-    _files_val = validator("files", pre=True, allow_reuse=True)(to_dict)
-    image: Union[str, List[str], None] = Field(
-        None, example="ipfs://ipfs/QmfKyJ4tuvHowwKQCbCHj4L5T3fSj8cjs7Aau8V7BWv226"
-    )  # type:ignore
-    name: Optional[str] = Field(None, example="My NFT token")  # type:ignore
-
 
 class Metadata(blockfrost_models.Metadata1):
     """Asset metadata.
 
-    The blockfrost autogenerated model does not conform to the metadata asset definition
-    for the cardano token registry, so this modifies it to be in compliance.
-
-    https://developers.cardano.org/docs/native-tokens/cardano-token-registry/
+    TODO: Remove this in the future.
     """
 
-    decimals: Optional[int] = blockfrost_models.Metadata1.__fields__[
-        "decimals"
-    ]  # type: ignore
-    logo: Optional[str] = blockfrost_models.Metadata1.__fields__["logo"]  # type: ignore
-    ticker: Optional[str] = blockfrost_models.Metadata1.__fields__[
-        "ticker"
-    ]  # type: ignore
-    url: Optional[str] = blockfrost_models.Metadata1.__fields__["url"]  # type: ignore
-
 
 class OnchainMetadataStandard(Enum):
     """On chain metadata standard version.
 
-    This class only exists because Genius Yield follow CIP68, and the blockfrost API
+    This class only exists because Genius Yield follows CIP68, and the blockfrost API
     doesn't handle it well.
 
     https://cips.cardano.org/cips/cip25/
     https://cips.cardano.org/cips/cip68/
     """
 
     CIP25v1 = "CIP25v1"
     CIP25v2 = "CIP25v2"
     CIP68v1 = "CIP68v1"
 
 
 class AssetIdentity(blockfrost_models.Asset1):
     """A blockchain asset."""
 
-    onchain_metadata: Optional[OnchainMetadata] = blockfrost_models.Asset1.__fields__[
-        "onchain_metadata"
-    ]  # type: ignore
-
-    onchain_metadata_standard: Optional[OnchainMetadataStandard]  # type: ignore
-
-    metadata: Optional[Metadata] = blockfrost_models.Asset1.__fields__[
-        "metadata"
-    ]  # type: ignore
-
-    _onchain_metadata_val = validator("onchain_metadata", pre=True, allow_reuse=True)(
-        to_dict
-    )
-
     @root_validator(pre=True)
     def _validate_asset_name(cls, values):
         """Handle missing asset metadata.
 
         Liqwid's qADA did not include asset_name in their metadata. This attempts to
         find the asset name in another piece of metadata.
 
@@ -278,79 +302,28 @@
         else:
             return 0
 
 
 class AddressUtxoContentItem(blockfrost_models.AddressUtxoContentItem):
     """An address UTxO item."""
 
-    reference_script_hash: Optional[
-        str
-    ] = blockfrost_models.AddressUtxoContentItem.__fields__[
-        "reference_script_hash"
-    ]  # type: ignore
-
-    inline_datum: Optional[str] = blockfrost_models.AddressUtxoContentItem.__fields__[
-        "inline_datum"
-    ]  # type: ignore
-
-    data_hash: Optional[str] = blockfrost_models.AddressUtxoContentItem.__fields__[
-        "inline_datum"
-    ]  # type: ignore
-
 
 class AddressUtxoContent(blockfrost_models.AddressUtxoContent, BaseList):
     """An address UTxO list of items."""
 
     __root__: List[
         AddressUtxoContentItem
     ] = blockfrost_models.AddressUtxoContent.__fields__[
         "__root__"
     ]  # type:ignore
 
 
 class Input(blockfrost_models.Input):
     """An input to a transaction."""
 
-    inline_datum: Optional[str] = Field(None, example="19a6aa")  # type: ignore
-    """
-    CBOR encoded inline datum
-    """
-    reference_script_hash: Optional[str] = Field(
-        None, example="13a3efd825703a352a8f71f4e2758d08c28c564e8dfcce9f77776ad1"
-    )  # type: ignore
-    """
-    The hash of the reference script of the input
-    """
-    data_hash: Optional[str] = Field(
-        None, example="9e478573ab81ea7a8e31891ce0648b81229f408d596a3483e6f4f9b92d3cf710"
-    )  # type: ignore
-    """
-    The hash of the transaction output datum
-    """
-
 
 class Output(blockfrost_models.Output):
     """An output to a transaction."""
 
-    inline_datum: Optional[str] = Field(None, example="19a6aa")  # type: ignore
-    """
-    CBOR encoded inline datum
-    """
-    reference_script_hash: Optional[str] = Field(
-        None, example="13a3efd825703a352a8f71f4e2758d08c28c564e8dfcce9f77776ad1"
-    )  # type: ignore
-    """
-    The hash of the reference script of the input
-    """
-    data_hash: Optional[str] = Field(
-        None, example="9e478573ab81ea7a8e31891ce0648b81229f408d596a3483e6f4f9b92d3cf710"
-    )  # type: ignore
-    """
-    The hash of the transaction output datum
-    """
-
 
 class TxContentUtxo(blockfrost_models.TxContentUtxo):
     """A Transaction, containing all inputs and outputs."""
-
-    inputs: List[Input]  # type: ignore
-    outputs: List[Output]  # type: ignore
```

### Comparing `minswap_py-0.1.1/src/minswap/pools.py` & `minswap_py-0.2.0/src/minswap/pools.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,35 +1,40 @@
-"""Functions for processing minswap pools."""
+"""Functions for processing minswap pools.
+
+This mostly reflects the pool functionality in the minswap-blockfrostadapter.
+"""
 import logging
-from datetime import datetime
 from decimal import Decimal
 from typing import List, Optional, Tuple, Union
 
-import blockfrost
-from dotenv import dotenv_values
 from pydantic import BaseModel, root_validator
 
 from minswap import addr
 from minswap.assets import naturalize_assets
 from minswap.models import AddressUtxoContent  # type: ignore[attr-defined]
 from minswap.models import (
     AddressUtxoContentItem,
     AssetIdentity,
     Assets,
     AssetTransaction,
     Output,
     TxContentUtxo,
-    TxIn,
 )
+from minswap.utils import BlockfrostBackend
 
-logging.basicConfig(
-    format="%(asctime)s - %(name)-8s - %(levelname)-8s - %(message)s",
-    datefmt="%d-%b-%y %H:%M:%S",
-)
 logger = logging.getLogger(__name__)
+logger.setLevel(logging.INFO)
+
+
+class InvalidPool(ValueError):
+    """Error thrown when a pool UTXO cannot be validated.
+
+    This error is generally thrown when the address associated with a pool is invalid
+    or when a UTXO does not have a valid pool NFT.
+    """
 
 
 def check_valid_pool_output(utxo: Union[AddressUtxoContentItem, Output]):
     """Determine if the pool address is valid.
 
     Args:
         utxo: A list of UTxOs.
@@ -39,55 +44,57 @@
         ValueError: No factory token found in utxos.
     """
     # Check to make sure the pool address is correct
     correct_address: bool = utxo.address == addr.POOL.address.encode()
     if not correct_address:
         message = f"Invalid pool address. Expected {addr.POOL}"
         logger.debug(message)
-        raise ValueError(message)
+        raise InvalidPool(message)
 
     # Check to make sure the pool has 1 factory token
     for asset in utxo.amount:
         has_factory: bool = (
             f"{addr.FACTORY_POLICY_ID}{addr.FACTORY_ASSET_NAME}" == asset.unit
         )
         if has_factory:
             break
     if not has_factory:
         message = "Pool must have 1 factory token."
         logger.debug(message)
         logger.debug(f"asset.unit={asset.unit}")
         logger.debug(f"factory={addr.FACTORY_POLICY_ID}{addr.FACTORY_ASSET_NAME}")
-        raise ValueError(message)
+        raise InvalidPool(message)
 
 
 def is_valid_pool_output(utxo: AddressUtxoContentItem):
     """Determine if a utxo contains a pool identifier."""
     try:
         check_valid_pool_output(utxo)
         return True
-    except ValueError:
+    except InvalidPool:
         return False
 
 
 class PoolState(BaseModel):
     """A particular pool state, either current or historical."""
 
-    tx_in: TxIn
+    tx_index: int
+    tx_hash: str
     assets: Assets
     pool_nft: Assets
     minswap_nft: Assets
     datum_hash: str
 
     class Config:  # noqa: D106
         allow_mutation = False
+        extra = "forbid"
 
     @root_validator(pre=True)
     def translate_address(cls, values):  # noqa: D102
-        assets: Assets = values["assets"]
+        assets = values["assets"]
 
         # Find the NFT that assigns the pool a unique id
         nfts = [asset for asset in assets if asset.startswith(addr.POOL_NFT_POLICY_ID)]
         if len(nfts) != 1:
             raise ValueError("A pool must have one pool NFT token.")
         pool_nft = Assets(**{nfts[0]: assets.__root__.pop(nfts[0])})
         values["pool_nft"] = pool_nft
@@ -157,17 +164,15 @@
         """Reserve amount of asset B."""
         return self.assets.quantity(1)
 
     def _get_asset_name(self, value: str) -> str:
         logger.debug(f"_get_asset_info: {value}")
         if value == "lovelace":
             return "lovelace"
-        env = dotenv_values()
-        api = blockfrost.BlockFrostApi(env["PROJECT_ID"])
-        info = api.asset(value, return_type="json")
+        info = BlockfrostBackend.api().asset(value, return_type="json")
         return bytes.fromhex(AssetIdentity.parse_obj(info).asset_name).decode()
 
     @property
     def asset_a_name(self) -> str:
         """Information about asset A."""
         return self._get_asset_name(self.unit_a)
 
@@ -272,63 +277,50 @@
         # Estimate the required input
         numerator: int = asset.quantity() * 1000 * reserve_in
         denominator: int = (reserve_out - asset.quantity()) * 997
         amount_in = Assets(unit=unit_out, quantity=numerator // denominator)
 
         # Estimate the price impact
         price_numerator: int = (
-            reserve_out * numerator * 887
+            reserve_out * numerator * 997
             - asset.quantity() * denominator * reserve_in * 1000
         )
         price_denominator: int = reserve_out * numerator * 1000
         price_impact: float = price_numerator / price_denominator
 
         return amount_in, price_impact
 
 
-class PoolHistory(BaseModel):
-    """A reference to a pool transaction state."""
-
-    tx_in: TxIn
-    block_height: int
-    time: datetime
-
-    class Config:  # noqa: D106
-        allow_mutation = False
-
-
 def get_pools(
     return_non_pools: bool = False,
 ) -> Union[List[PoolState], tuple[List[PoolState], List[AddressUtxoContentItem]]]:
     """Get a list of all pools.
 
     Args:
         return_non_pools: If True, returns UTxOs not belonging to pools as a second
             output. Default is False.
 
     Returns:
-        A list of pools, and a list of non-pool UTxOs
+        A list of pools, and a list of non-pool UTxOs (if specified)
     """
-    env = dotenv_values()
-    api = blockfrost.BlockFrostApi(env["PROJECT_ID"])
-
-    utxos_raw = api.address_utxos(
+    utxos_raw = BlockfrostBackend.api().address_utxos(
         addr.POOL.address.encode(), gather_pages=True, order="asc", return_type="json"
     )
 
     utxos = AddressUtxoContent.parse_obj(utxos_raw)
 
     pools: List[PoolState] = []
     non_pools: List[AddressUtxoContentItem] = []
 
     for utxo in utxos:
         if is_valid_pool_output(utxo):
             pools.append(
                 PoolState(
-                    tx_in=TxIn(tx_hash=utxo.tx_hash, tx_index=utxo.output_index),
+                    tx_hash=utxo.tx_hash,
+                    tx_index=utxo.output_index,
                     assets=Assets(values=utxo.amount),
                     datum_hash=utxo.data_hash,
                 )
             )
         else:
             non_pools.append(utxo)
 
@@ -345,31 +337,29 @@
 
     Args:
         tx_hash: The transaction hash.
 
     Returns:
         A `PoolState` if a pool is token is found, and `None` otherwise.
     """
-    env = dotenv_values()
-    api = blockfrost.BlockFrostApi(env["PROJECT_ID"])
-
-    pool_tx = api.transaction_utxos(tx_hash, return_type="json")
+    pool_tx = BlockfrostBackend.api().transaction_utxos(tx_hash, return_type="json")
     pool_utxo = None
     for utxo in TxContentUtxo.parse_obj(pool_tx).outputs:
         if utxo.address == addr.POOL.bech32:
             pool_utxo = utxo
             break
 
     if pool_utxo is None:
         return None
 
     check_valid_pool_output(pool_utxo)
 
     out_state = PoolState(
-        tx_in=TxIn(tx_hash=tx_hash, tx_index=utxo.output_index),
+        tx_hash=tx_hash,
+        tx_index=utxo.output_index,
         assets=Assets(values=utxo.amount),
         datum_hash=utxo.data_hash,
     )
 
     return out_state
 
 
@@ -378,63 +368,18 @@
 
     Args:
         pool_id: The unique id of the pool.
 
     Returns:
         A `PoolState` if the pool can be found, and `None` otherwise.
     """
-    env = dotenv_values()
-    api = blockfrost.BlockFrostApi(env["PROJECT_ID"])
-
     nft = f"{addr.POOL_NFT_POLICY_ID}{pool_id}"
-    nft_txs = api.asset_transactions(
+    nft_txs = BlockfrostBackend.api().asset_transactions(
         nft, count=1, page=1, order="desc", return_type="json"
     )
 
     if len(nft_txs) == 0:
         return None
 
     nft_txs = AssetTransaction.parse_obj(nft_txs[0])
 
     return get_pool_in_tx(tx_hash=nft_txs.tx_hash)
-
-
-def get_pool_history(
-    pool_id: str, page: int = 1, count: int = 100, order: str = "desc"
-) -> List[PoolHistory]:
-    """Get a list of pool history transactions.
-
-    This returns only a list of `PoolHistory` items, each providing enough information
-    to track down a particular pool transaction.
-
-    Args:
-        pool_id: The unique pool id.
-        page: The index of paginated results to return. Defaults to 1.
-        count: The total number of results to return. Defaults to 100.
-        order: Must be "asc" or "desc". Defaults to "desc".
-
-    Returns:
-        A list of `PoolHistory` items.
-    """
-    env = dotenv_values()
-    api = blockfrost.BlockFrostApi(env["PROJECT_ID"])
-
-    nft = f"{addr.POOL_NFT_POLICY_ID}{pool_id}"
-    nft_txs = api.asset_transactions(
-        nft, count=count, page=page, order=order, return_type="json"
-    )
-
-    if len(nft_txs) == 0:
-        return []
-
-    pool_snapshots = []
-    for ph in nft_txs:
-        at = AssetTransaction.parse_obj(ph)
-        pool_snapshots.append(
-            PoolHistory(
-                tx_in=TxIn(tx_hash=at.tx_hash, tx_index=at.tx_index),
-                block_height=at.block_height,
-                time=datetime.fromtimestamp(at.block_time),
-            )
-        )
-
-    return pool_snapshots
```

